"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "Jens Fredskov"
email = "jsfr@users.noreply.github.com"

[revset-aliases]
"closest_bookmark(to)" = 'heads(::to & (bookmarks() ~ (bookmarks(exact:"main") | bookmarks(exact:"master"))))'
"immutable_heads()" = "builtin_immutable_heads() | (remote_bookmarks() ~ mine())"

[aliases]
tug = ["bookmark", "move", "--from", "closest_bookmark(@-)", "--to", "@-"]
re = ["restore"]
rb = ["rebase"]
f = ["git", "fetch"]
p = ["git", "push", "--allow-new"]
s = ["st"]
e = ["edit"]
d = ["diff"]
n = ["new"]
nt = ["new", "-r", "trunk()"]
rbt = ["rebase", "-b", "closest_bookmark(@)", "-d", "trunk()"]

[ui]
default-command = "log"
diff-editor = ["nvim", "-c", "DiffEditor $left $right $output"]

[git]
auto-local-bookmark = true
# Prevent pushing work in progress
private-commits = "description(glob:'wip:*')"

# disable pagination for `jj status`, use `delta` for `jj diff` and `jj show`
[[--scope]]
--when.commands = ["status"]
[--scope.ui]
paginate = "never"

[[--scope]]
--when.commands = ["diff", "show"]
[--scope.ui]
pager = "delta"
[--scope.ui.diff]
format = "git"
